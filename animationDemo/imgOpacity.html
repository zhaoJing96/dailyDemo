<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>文字图片图片阴影</title>
</head>
<style>
    body {
        margin: 0;
        padding: 0;
    }

    .container {
        width: 100vw;
        height: 100%;
        background-color: #000000;
        color: #ffffff;
    }

    .empty_box {
        width: 100vh;
        height: 100vh;
    }

    .content {
        width: 1200px;
        margin: 0 auto;
        text-align: center;
    }

    h1 {
        margin: 0;
        margin-bottom: 30px;
    }
</style>

<body>
    <div class="container">
        <div class="empty_box"></div>
        <div class="empty_box"></div>
        <div class="content">
            <h1 class="title">这个是文字，文字渐变</h1>
            <img class="img" src="./image/banner3.jpg" alt="" />
        </div>
    </div>
    <script>
        window.onload = () => {
            let hei = document.body.offsetHeight;
        }
        window.addEventListener('scroll', (e) => {
            let content = document.getElementsByClassName('content')[0]; // 内容DOM
            let emptyBox = document.getElementsByClassName('empty_box')[0]; // 获取1vh高度DOM
            let title = document.getElementsByClassName('title')[0]; // 需要改变opacity文字DOM
            let img = document.getElementsByClassName('img')[0]; // 需要改变opacity图片DOM

            let scrollTop = getScrollTop(); // 滚动高度
            let hei = document.body.offsetHeight;
            let contentHei = content.offsetHeight;
            let vhhei = emptyBox.offsetHeight;
            let halfVhhei = emptyBox.offsetHeight / 2;
            let topHei = content.getBoundingClientRect().top;

            console.log('scrollTop', scrollTop);
            console.log('内容盒子距离顶部距离', topHei);
            console.log('body高度', hei);
            console.log('contentHei', contentHei);
            console.log('一屏高度', vhhei);
            console.log('屏幕一半高度', halfVhhei);
            // 判断需要渐变的DOM节点距离顶部的距离为1vh时开始计算透明度
            let opa = null;
            if (topHei <= vhhei) {
                if (vhhei - topHei >= 0 && vhhei - topHei < 100) {
                    opa = 0;
                } else if (vhhei - topHei >= 100 && vhhei - topHei < 200) {
                    opa = 0.2;
                } else if (vhhei - topHei >= 200 && vhhei - topHei < 300) {
                    opa = 0.4;
                } else if (vhhei - topHei >= 300 && vhhei - topHei < 400) {
                    opa = 0.6;
                } else if (vhhei - topHei >= 400 && vhhei - topHei < 500) {
                    opa = 0.8;
                } else if (vhhei - topHei >= 500) {
                    opa = 1;
                }
                title.style.opacity = opa;
                title.style.transition = '.5s all ease-in-out';
                img.style.opacity = opa;
                title.style.transition = '.5s all ease-in-out';
            }
        });
        // 获取屏幕高度
        function getScrollTop() {
            let scrollTop = 0;
            if (document.documentElement && document.documentElement.scrollTop) {
                scrollTop = document.documentElement.scrollTop;
            } else if (document.body) {
                scrollTop = document.body.scrollTop;
            }
            return scrollTop;
        }
    </script>
</body>

</html>
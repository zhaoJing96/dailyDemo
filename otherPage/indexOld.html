<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>落地页 - 产品介绍 废弃动画</title>
    <link rel="stylesheet/less" type="text/css" href="./css/index.less" />
</head>

<body>
    <script src="//cdnjs.cloudflare.com/ajax/libs/less.js/3.11.1/less.min.js"></script>
    <div class="ui_container">
        <div style="height: 150vh;"></div>
        <!-- 产品介绍 -->
        <div class="ui_product_box">
            <!-- sos -->
            <div class="ui_product_content ui_sos_box">
                <div class="introduce sos_introduce">
                    <h1 class="productTitle">是安全帽，更是守护者</h1>
                    <p class="productTxt">SOS一键呼救，快一秒拯救生命<br>危险区域电子围栏、安全帽脱落、坠落跌倒自动报警...<br>更全能的守护者，规避每一次意外</p>
                </div>
                <video class="video sosVideo" src="./video/sos.mp4" autoplay='autoplay' muted='muted'></video>
            </div>
            <!-- 心率 -->
            <div class="ui_product_content ui_heartRate_box">
                <div class="introduce heartRate_introduce">
                    <h1 class="productTitle">你的健康，它能感应</h1>
                    <p class="productTxt">支持心电图检测，轻抬双手按住两侧心型按钮，一分钟<br>检查身体，降低高空作业风险，内置心率、体温等实时<br>传感器，健康情况了然于心</p><br>
                </div>
                <video class="video heartRateVideo" src="./video/sos.mp4" autoplay='autoplay' muted='muted'></video>
            </div>
            <!-- 芯片 -->
            <div class="ui_product_content ui_chip_box">
                <div class="introduce chip_introduce">
                    <h1 class="productTitle">用芯片，探索智慧海洋</h1>
                    <p class="productTxt">重金研发高科技集成芯片，体积更轻盈，功能更集成。通过将人员行为数据化，<br>联动管理后台高效打造智慧工地</p>
                </div>
                <video class="video chipVideo" src="./video/sos.mp4" autoplay='autoplay' muted='muted'></video>
            </div>
            <!-- 高精度定位 -->
            <div class="ui_product_content ui_location_box">
                <div class="introduce location_introduce">
                    <h1 class="productTitle">20cm高精度定位，重新<br>定义智能考勤</h1>
                    <p class="productTxt">
                        UWB技术最有利的优势是误差极小，建造者智能安全<br>帽使用了全新研发的UWB+GPS定位算法，将智能考勤<br>控制在分米级，打破行业定位误差5-20m的常规</p>
                </div>
                <video class="video locationVideo" src="./video/sos.mp4" autoplay='autoplay' muted='muted'></video>
            </div>
            <!-- 电量 -->
            <div class="ui_product_content ui_battery_box">
                <div class="introduce battery_introduce">
                    <h1 class="productTitle">放肆用，超强电量告别焦虑</h1>
                    <p class="productTxt">
                        你的手机能撑多久？建造者智能安全帽可以续航6天。在考虑长续航的做法上，<br>采用低功耗通信模组+电池管理系统设计出的电池，轻巧、安全、可拆卸，更破<br>解了行业普遍续航4-6小时的困境，连一众老年机都甘拜下风
                    </p>
                    <p class="productTxt battery_time">可续航6天，约<span class="time">144</span>小时</p>
                </div>
                <video class="video batteryVideo" src="./video/sos.mp4" autoplay='autoplay' muted='muted'></video>
            </div>
        </div>
    </div>

    <script>
        let productContent = document.getElementsByClassName('ui_product_content'); // 获取产品介绍DOM
        let productTitle = document.getElementsByClassName('productTitle'); // 获取sos标题DOM 
        let productTxt = document.getElementsByClassName('productTxt'); // 获取产品介绍文案DOM
        let winHeight = window.innerHeight; // 获取屏幕可视区域高度
        let intoOpa = 0; // 进入可视区域文案透明度初始值
        let leaveOpa = 1; // 离开可视区域文案透明度初始值
        // 改变内容透明度
        function setEleOpacity(productcontentDom) {
            let topHei = productcontentDom.getBoundingClientRect().top; // 动态获取DOM距离顶部的距离
            if (topHei > 0 && topHei <= winHeight) {
                // 判断产品介绍节点进入可视区域时，设置样式opacity:0-1
                intoOpa = (((winHeight - topHei) / winHeight) * 1.5).toFixed(2);
                if (intoOpa > 1) {
                    intoOpa = 1;
                }
                productcontentDom.style.opacity = intoOpa;
            } else if (topHei < 0 && Math.abs(topHei) <= winHeight) {
                // 判断产品介绍节点离开可视区域时，设置样式opacity:1-0
                leaveOpa = 1 - (((winHeight - Math.abs(topHei)) / winHeight) * 2).toFixed(2);
                productcontentDom.style.opacity = Math.abs(leaveOpa);
            }
        }
        // 设置元素位移
        function setEleTransform(dom) {
            let titleTopHei = dom.getElementsByClassName('productTitle')[0].getBoundingClientRect().top; // 动态获取DOM距离顶部的距离
            // 设置标题移动
            if (titleTopHei <= winHeight / 1.5) {
                let titlehei = (winHeight / 1.5 - titleTopHei) * (128 / winHeight);
                if (titlehei > 128) {
                    titlehei = 128;
                } else if (titlehei < 0) {
                    titlehei = 0;
                }
                dom.getElementsByClassName('productTitle')[0].style.transform = 'translateY(-' + titlehei + 'px)';
                dom.getElementsByClassName('productTxt')[0].style.transform = 'translateY(-' + titlehei + 'px)';

            } else if (titleTopHei < winHeight && titleTopHei >= winHeight / 1.5) {
                dom.getElementsByClassName('productTitle')[0].style.transform = 'translateY(0px)';
                dom.getElementsByClassName('productTxt')[0].style.transform = 'translateY(0px)';
            }
        }
        // 监听滚动事件、改变产品介绍DOM样式
        window.addEventListener('scroll', (e) => {
            // 设置透明度、文字移动
            for (let i = 0; i < productContent.length; i++) {
                const item = productContent[i];
                let topHei = item.getBoundingClientRect().top; // 动态获取DOM距离顶部的距离
                let productTitle = item.getElementsByClassName('productTitle')[0]; // 获取标题文字节点
                let productTxt = item.getElementsByClassName('productTxt')[0]; // 获取介绍文字节点
                // 判断在产品介绍进入屏幕可视范围之内执行
                if (topHei <= winHeight && topHei > 0) {
                    item.getElementsByClassName('productTitle')[0].style.transform = 'translateY(0px)'; // 初始化标题文字位置
                    item.getElementsByClassName('productTxt')[0].style.transform = 'translateY(0px)'; // 初始化介绍文字位置
                    setEleOpacity(item);
                    setEleTransform(item);
                }
            }
        });
    </script>
</body>

</html>